webpackJsonp([3],{"F/49":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),n=a.n(s),i=a("exGp"),o=a.n(i),r=a("wOqb"),c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-info-card"},[a("router-link",{staticClass:"banner",attrs:{to:"/blogDetail"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.authorInfo.avatar,expression:"authorInfo.avatar"}]})]),t._v(" "),a("div",{staticClass:"info"},[a("router-link",{staticClass:"name",attrs:{to:"/blogDetail"}},[t._v("\n      "+t._s(t.authorInfo.name)+"\n    ")]),t._v(" "),1===t.authorInfo.sex?a("Icon",{attrs:{type:"female"}}):a("Icon",{attrs:{type:"male"}}),t._v(" "),a("div",{staticClass:"meta"},[a("span",[t._v(t._s(t.meta.wordCount)+"万字 ·")]),t._v(" "),a("span",[t._v(t._s(t.meta.pageview)+"万阅读 ·")]),t._v(" "),a("span",[t._v(t._s(t.meta.attentionCount)+"人关注")])]),t._v(" "),a("Button",{attrs:{type:"primary",shape:"circle",icon:"android-add"},on:{click:t.addCircleCard}},[t._v("加入圈子")])],1)],1)},staticRenderFns:[]};var l=a("VU/8")({name:"UserInfoCard",props:{authorInfo:{default:"authorInfo"},addCircle:{default:"addCircle"}},data:function(){return{meta:{wordCount:100,pageview:100,attentionCount:1e3}}},mounted:function(){},methods:{addCircleCard:function(){this.$emit("addCircle")}}},c,!1,function(t){a("Vyw4")},"data-v-3f2cde86",null).exports,m=a("JzPK"),u={name:"CommentInput",props:{articleId:{default:"articleId"},authorInfo:{default:"authorInfo"},getBlogCommentList:{default:"getBlogCommentList"}},data:function(){return{avatar:"https://i.loli.net/2017/08/21/599a521472424.jpg",showAction:!1,comment:""}},mounted:function(){this.avatar=window.sessionStorage.getItem("avatar")},methods:{limitSpace:function(){this.comment=this.comment.replace(/^ +| +$/g,"")},getFocusSwitchShowAction:function(){this.showAction=!0},sendComment:function(){m.a.stringIsNull(this.comment)?this.$Message.warning("回复内容不能为空"):this.publishComment()},publishComment:function(){var t=this;return o()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.i(t.articleId,t.authorInfo.userId,t.comment,m.a.getCurrentTime());case 2:(a=e.sent)&&a.state?(t.$emit("getBlogCommentList"),t.showAction=!1,t.comment="",t.$Message.success(a.message)):t.$Message.error(a.message);case 4:case"end":return e.stop()}},e,t)}))()},cancelComment:function(){this.showAction=!1}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-area-input"},[a("div",{staticClass:"new-comment"},[a("Avatar",{staticClass:"avatar",attrs:{src:t.avatar,size:"large"}}),t._v(" "),a("Input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"写下你的评论..."},on:{"on-focus":t.getFocusSwitchShowAction},nativeOn:{keyup:function(e){return t.limitSpace(e)}},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),t._v(" "),t.showAction?a("div",{staticClass:"write-function-block"},[a("div",{staticClass:"hint"},[t._v("Ctrl+Enter 发表")]),t._v(" "),a("a",{staticClass:"btn btn-send",on:{click:t.sendComment}},[t._v("发送")]),t._v(" "),a("a",{staticClass:"cancel",on:{click:t.cancelComment}},[t._v("取消")])]):t._e()],1)])},staticRenderFns:[]};var v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-list"},[a("div",{staticClass:"top-title"},[a("div",{staticClass:"pull-left"},[a("span",[t._v(t._s(t.commentList.length)+"条评论")]),t._v(" "),a("a",{staticClass:"author-only",on:{click:t.justLookAuthor}},[t._v("只看作者")])]),t._v(" "),a("div",{staticClass:"pull-right"},[a("a",{on:{click:t.timeSequence}},[t._v("按时间正序")]),t._v(" "),a("a",{on:{click:t.timeInverted}},[t._v("按时间倒序")])])]),t._v(" "),t._l(t.commentList,function(e,s){return a("div",{key:s,staticClass:"comment"},[a("div",{staticClass:"author"},[a("div",{staticClass:"v-tooltip-container",staticStyle:{"z-index":"0"}},[a("Avatar",{staticClass:"avatar",attrs:{src:e.avatar}})],1),t._v(" "),a("div",{staticClass:"info"},[a("span",{staticClass:"name"},[t._v(t._s(e.userName))]),t._v(" "),a("div",{staticClass:"meta"},[a("span",[t._v(t._s(e.publishTime))])])])]),t._v(" "),a("div",{staticClass:"comment-wrap"},[a("p",[t._v(t._s(e.comment))]),t._v(" "),a("div",{staticClass:"tool-group"},[a("a",{class:{"like-button":e.isLike,"like-button liked":!e.isLike},on:{click:function(a){t.likeComment(e.commentId,e.isLike)}}},[e.isLike?a("Icon",{staticClass:"afflatus",attrs:{type:"ios-lightbulb-outline"}}):t._e(),t._v(" "),e.isLike?t._e():a("Icon",{staticClass:"afflatus my-afflatus",attrs:{type:"ios-lightbulb"}}),t._v(" "),a("span",[t._v(t._s(e.likes)+"人赞")])],1)])])])})],2)},staticRenderFns:[]};var f={name:"BlogDetail",components:{UserInfoCard:l,CommentInput:a("VU/8")(u,d,!1,function(t){a("KIqn")},"data-v-6bd61bf0",null).exports,CommentList:a("VU/8")({name:"CommentList",props:{commentList:{default:"commentList"},likeThisComment:{default:"likeThisComment"},isCommentLike:{default:"isCommentLike"}},data:function(){return{commentCount:63,authorInfo:{avatar:"https://i.loli.net/2017/08/21/599a521472424.jpg",userName:"用户名"},meta:{floor:17,publishTime:"2018.05.10 19:25",comment:"我是一名新晋医生，偶尔也会吐槽基层医生工资太低，同学刚毕业轻松翻我好几个倍，总建议让我换工作",like:63}}},mounted:function(){},methods:{justLookAuthor:function(){this.$Message.info("暂不提供此功能")},timeSequence:function(){this.$Message.info("暂不提供此功能")},timeInverted:function(){this.$Message.info("暂不提供此功能")},likeComment:function(t,e){this.$emit("likeThisComment",t,e)}}},v,!1,function(t){a("aoix")},"data-v-41faad75",null).exports},data:function(){return{articleId:"",isLike:!0,authorInfo:{userId:"",avatar:"https://i.loli.net/2017/08/21/599a521472424.jpg",name:"我的名字",sex:0},meta:{title:"无标题文章",publishTime:"2018.05.12 08:22",wordage:1e3,viewsCount:1e3,commentsCount:1e3,likesCount:1e3,likes:419},commentList:[],blogContentHtml:'<p>我都是金佛山的附件soID金佛山的</p><img src="//upload-images.jianshu.io/upload_images/9215795-4a96efa0165df0bc.jpg" />'}},mounted:function(){this.articleId=parseInt(this.$route.query.articleId),this.authorInfo.userId=parseInt(window.sessionStorage.getItem("userId")),this.getDetailBlog(),this.getBlogCommentList()},methods:{getDetailBlog:function(){var t=this;return o()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(t.articleId,t.authorInfo.userId);case 2:(a=e.sent)&&(t.blogContentHtml=a.data.blogContentHtml,t.meta.title=a.data.title,t.meta.publishTime=a.data.publishTime,t.meta.likes=a.data.likes,t.authorInfo.avatar=a.data.avatar,t.authorInfo.name=a.data.userName,t.authorInfo.sex=a.data.sex,t.isLike=!a.data.state);case 4:case"end":return e.stop()}},e,t)}))()},getBlogCommentList:function(){var t=this;return o()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.d(t.articleId,t.authorInfo.userId);case 2:(a=e.sent)&&a.data.length>0&&(t.commentList=a.data);case 4:case"end":return e.stop()}},e,t)}))()},likeThisArticle:function(){var t=this;return o()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,t.isLike&&(a=1),e.next=4,r.b(t.articleId,t.authorInfo.userId,a);case 4:e.sent&&t.getDetailBlog();case 6:case"end":return e.stop()}},e,t)}))()},likeThisComment:function(t,e){var a=this;return o()(n.a.mark(function s(){var i;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i=0,e&&(i=1),s.next=4,r.c(t,a.authorInfo.userId,i);case 4:s.sent&&a.getBlogCommentList();case 6:case"end":return s.stop()}},s,a)}))()},addCircle:function(){this.$Message.info("暂不提供此功能")}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"blog-detail-info"},[a("div",{staticClass:"blog-info"},[a("p",{staticClass:"title"},[t._v(t._s(t.meta.title))]),t._v(" "),a("div",{staticClass:"author"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.authorInfo.avatar,expression:"authorInfo.avatar"}]}),t._v(" "),a("div",{staticClass:"info"},[a("span",{staticClass:"name"},[t._v(t._s(t.authorInfo.name))]),t._v(" "),a("Button",{attrs:{type:"primary",shape:"circle",size:"small"},on:{click:t.addCircle}},[a("Icon",{attrs:{type:"android-add"}}),t._v("\n          加入圈子\n        ")],1),t._v(" "),a("div",{staticClass:"meta"},[a("span",[t._v(t._s(t.meta.publishTime))]),t._v(" "),a("span",[t._v("字数 "+t._s(t.meta.wordage))]),t._v(" "),a("span",[t._v("阅读 "+t._s(t.meta.viewsCount))]),t._v(" "),a("span",[t._v("评论 "+t._s(t.meta.commentsCount))]),t._v(" "),a("span",[t._v("喜欢 "+t._s(t.meta.likesCount))])])],1)]),t._v(" "),a("div",{staticClass:"show-content",domProps:{innerHTML:t._s(t.blogContentHtml)}})]),t._v(" "),t._m(0),t._v(" "),a("UserInfoCard",{attrs:{authorInfo:t.authorInfo},on:{addCircle:t.addCircle}}),t._v(" "),a("div",{staticClass:"meta-bottom"},[a("div",{class:{like:t.isLike,"like liked":!t.isLike}},[a("div",{staticClass:"btn-like",on:{click:t.likeThisArticle}},[t.isLike?a("Icon",{staticClass:"heart",attrs:{type:"ios-heart-outline"}}):t._e(),t._v(" "),t.isLike?t._e():a("Icon",{staticClass:"my-heart",attrs:{type:"ios-heart"}}),t._v(" "),a("a",[t._v("喜欢")])],1),t._v(" "),a("div",{staticClass:"modal-wrap"},[a("a",[t._v(t._s(t.meta.likes))])])])]),t._v(" "),a("CommentInput",{attrs:{articleId:t.articleId,authorInfo:t.authorInfo},on:{getBlogCommentList:t.getBlogCommentList}}),t._v(" "),a("CommentList",{attrs:{commentList:t.commentList},on:{likeThisComment:t.likeThisComment}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"support-author"},[e("p",[this._v("你来，已是清风拂面")])])}]};var p=a("VU/8")(f,h,!1,function(t){a("VmS6")},null,null);e.default=p.exports},KIqn:function(t,e){},VmS6:function(t,e){},Vyw4:function(t,e){},aoix:function(t,e){}});
//# sourceMappingURL=BlogDetail.js.map